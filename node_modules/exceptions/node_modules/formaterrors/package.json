{
  "name": "formaterrors",
  "version": "0.1.1",
  "author": {
    "name": "Allan Boyd",
    "email": "millionyearsold@gmail.com"
  },
  "description": "API that provides formatting and highlight options for errors and their stack trace",
  "keywords": [
    "errors",
    "logging",
    "testing",
    "test",
    "log"
  ],
  "bugs": {
    "url": "http://github.com/allanmboyd/formatErrors/issues"
  },
  "main": "lib/formatErrors.js",
  "directories": {
    "lib": "./lib",
    "example": "./examples"
  },
  "repository": {
    "type": "git",
    "url": "http://github.com/allanmboyd/formatErrors.git"
  },
  "scripts": {
    "test": "./node_modules/jshint/bin/hint lib/formatErrors.js test/testFormatErrors.js && ./node_modules/nodeunit/bin/nodeunit test/testFormatErrors.js"
  },
  "dependencies": {
    "diff_match_patch": "0.1.1",
    "stack-trace": "0.0.6"
  },
  "devDependencies": {
    "jshint": "0.5.6",
    "nodeunit": "0.7.1",
    "should": "0.4.2"
  },
  "engine": {
    "node": ">= 0.6.6"
  },
  "readme": "FormatErrors\n============\n\nAn API that provides various options for formatting and highlighting Errors. May be useful for logging and test\nframeworks for example.\n\nStack lines can be filtered in and out based on patterns and limited by range (e.g. lines 2 through 10). Stack lines\nand error message can have highlights applied based on patterns. Finally stack lines can be formatted to include or\nexclude available fields.\n\nThe API is quite flexible with a range of methods varying in level with means to specify custom highlights and\nformats.\n\nStyles\n------\n\nThe following list of styles for stack lines and error messages are supported. These styles can be combined in some\ncircumstances for example BOLD and RED to produce a bold red highlight:\n\n    * RED\n    * GREEN\n    * YELLOW\n    * BLUE\n    * PURPLE\n    * CYAN\n    * BOLD\n    * NORMAL\n\nStyles are specified using the STYLES constant e.g:\n\n    var formatErrors = require(\"formaterrors\");\n    var bold = formatErrors.STYLES.BOLD;\n    var red = formatErrors.STYLES.RED;\n\n\nStackThemes\n-----------\n\nA StackTheme is the name given to the type of object that can be applied to an Error or Error.stack to\nproduce different highlighting and filtering of stack lines.\n\nThe following example creates a StackTheme that when applied highlights the message part of an Error or Error.stack\nin bold red and highlights stack lines that include the word 'formatAndTheme' in bold. In addition a stack line range is\nincluded that will cause all but the first 5 stack lines to be removed.\n\n    var formatErrors = require(\"formaterrors\");\n    var theme = new formatErrors.StackTheme();\n    theme.messageLineHighlights = [formatErrors.STYLES.BOLD, formatErrors.STYLES.RED];\n    theme.stackHighlights = [formatErrors.STYLES.BOLD];\n    theme.stackHighlightPatterns = [\"formatAndTheme\"];\n    theme.stackRange.depth = 5;\n\n\nStackFormats\n------------\n\nA StackFormat is a type of object that describes the fields to include in each line of an error stack trace. In addition\nthe stack line prefix (i.e. normally this is '    at') can be set. The available stack line fields are:\n\n    * typeName\n    * functionName\n    * methodName\n    * fileName\n    * lineNumber\n    * columnNumber\n\nBy default all fields are included.\n\nThe following example creates a StackFormat that only provides fileName, lineNumber and columnNumber stack line fields\nwith a prefix of \"    -\".\n\n    var formatErrors = require(\"formaterrors\");\n    var format = new formatErrors.StackFormat();\n    format.components = [\"fileName\", \"lineNumber\", \"columnNumber\"];\n    format.prefix = \"    -\"\n\n\nInstallation\n------------\n\n    $ npm install formaterrors\n\nOr include as a dependency within packakage.json and use: *npm link*.\n\n\nUsage\n-----\n\n    var formatErrors = require(\"formaterrors\");\n\n\nThen invoke the provided APIs on instances of Error or Error.stack as required. Some examples are shown below.\n\n\nExamples\n--------\n\n1. Highlight in bold the message and stacklines that include the module name of an error:\n\n        var formatErrors = require(\"formaterrors\");\n        var error = new Error(\"the error message\");\n        var error = formatErrors.boldError(error, \"testFormatErrors\");\n        console.log(error.stack);\n\n2. Highlight an error using bold for the stacklines containing some pattern - say the name of a module. Also,\nif the assertion message is long then the diff of the expected and actual are provided along with the expected and\nactual values:\n\n        var formatErrors = require(\"formaterrors\");\n        var stackTheme = new formatErrors.StackTheme();\n        stackTheme.messageLineHighlights = [formatErrors.STYLES.BOLD];\n        stackTheme.stackHighlights = [formatErrors.STYLES.BOLD];\n        stackTheme.stackHighlightPatterns = [\"testDocit\"];\n        throw formatErrors.highlightError(error, stackTheme);\n\n3. From a stack trace, only show stack lines that include a specified value or values:\n\n        var formatErrors = require(\"formaterrors\");\n        var error = new Error(\"the error message\");\n        var filteredStack = formatErrors.stackFilter(error.stack, [\"stackPatternFilter\", \"Object\"]);\n        console.log(filteredStack);\n\n4. From a stack trace, only show stack lines that do not include a specified value or values:\n\n        var formatErrors = require(\"formaterrors\");\n        var error = new Error(\"the error message\");\n        var filteredStack = formatErrors.stackFilter(error.stack, [\"stackPatternFilter\", \"Object\"], false);\n        console.log(filteredStack);\n\n5. From a stack trace, only include the first 2 stack lines:\n\n        var formatErrors = require(\"formaterrors\");\n        var error = new Error(\"the error message\");\n        var rangedStack = formatErrors.stackRange(error.stack, 0, 2);\n        console.log(rangedStack);\n\n6. From a stack trace, Include all but the first 2 stack lines:\n\n        var formatErrors = require(\"formaterrors\");\n        var error = new Error(\"the error message\");\n        var rangedStack = formatErrors.stackRange(error.stack, 2);\n        console.log(rangedStack);\n\n\nSome examples are available within the *examples* folder. They can be executed as follows:\n\n    $node examples/<file.js>\n\n    \nAPI Docs\n--------\n\nTypes\n-----\n\n###StackFormat###\n\nAn object that describes the format of a stack line.\n\n\n###StackTheme###\n\nAn object that may be used to define a theme for a a set operations (transformations) to apply to an error stack.\n\n\n###STYLES###\n\nSome provided styles for stackHighlight. These may be overridden or alternatives may be used as required.\n\nboldError\n---------\n\n###exports.boldError = function (error, moduleName)###\n\nConvenience method that styles an Error so that the message is bold. If a module name is also provided\nthen all stack lines containing that module name are also bold styled.\n\n####Parameters####\n\n* error *Error* the Error\n* moduleName *String* optional module name or pattern whose matched StackLines are to be styled bold\n\n####Returns####\n\nthe Error styled bold\n* * *\n\n\nhighlightError\n--------------\n\n###exports.highlightError = function (error, stackTheme, stackFormat)###\n\nApply a StackTheme and an optional StackFormat to an error and return the result.\n\nIf the given error is an AssertionError with a long actual / expected then the diff of the actual / expected will\nalso be provided and added to the message part of the error.\n\n####Parameters####\n\n* error *Error* an Error to style\n* stackTheme *StackTheme* the theme for the error\n* stackFormat *StackFormat* optional StackFormat to apply formatting to the stack lines\n\n####Returns####\n\n*Error* the given Error with stack themed and formatted as required\n* * *\n\n\nformatStack\n-----------\n\n###exports.formatStack = function (error, stackFormat)###\n\nFormat the stack part (i.e. the stack lines not the message part in the stack) according to a specified StackFormat.\n(See exports.StackFormat for available stack line fields.)\n\n####Parameters####\n\n* error *Error* the error whose stack to format\n* stackFormat *StackFormat* the specification for the required format\n\n####Returns####\n\n*Error* the given error with its stack modified according to the given StackFormat\n* * *\n\n\nboldMessageBoldModuleStack\n--------------------------\n\n###exports.boldMessageBoldModuleStack = function (stack, moduleName)###\n\nConvenience method that highlights the message line and all module related lines in bold.\n\n####Parameters####\n\n* stack *String* an Error stack (i.e. error.stack)\n* moduleName *String* the name of a module whose stack lines to highlight in bold\n\n####Returns####\n\n*String* a new error stack with bold message and module entries.\n* * *\n\n\napplyStackHighlights\n--------------------\n\n###exports.applyStackHighlights = function (stack, messageLineHighlights, stackHighlights, stackPatterns, inclusive)###\n\nConvenience method to apply a given set of highlights to a an error stack.\n\n####Parameters####\n\n* stack *String* an Error stack (i.e. error.stack)\n* messageLineHighlights *String[]* an array of prefixes to be applied to the first line of the stack\n(e.g. [exports.styles.RED, exports.styles.BOLD])\n* stackHighlights *String[]* an array of prefixes to be applied to each line (e.g. [exports.styles.RED,\nexports.styles.BOLD]) matching one or more of the provided \"stackPatterns\"\n* stackPatterns *String[]* an array of regular expressions against which to perform match operations on each line of the stack\n* inclusive *Boolean* use the patterns to include or exclude from the stack. Defaults to true.\n\n####Returns####\n\n*String* a new error stack String highlighted as specified by the parameters\n* * *\n\n\napplyStackTheme\n---------------\n\n###exports.applyStackTheme = function (stack, theme)###\n\nConvenience method to apply multiple transformations to an error stack.\n\n####Parameters####\n\n* stack *String* an error stack (i.e. error.stack)\n* theme *StackTheme* the theme for the stack\n\n####Returns####\n\n*String* a new error stack String transformed according to the specified StackFormat\n* * *\n\n\nhighlightStackMessage\n---------------------\n\n###exports.highlightStackMessage = function (stack, highlights)###\n\nHighlight just the first line of an error stack - i.e. the message part\n\n####Parameters####\n\n* stack *String* an Error stack (i.e. error.stack)\n* highlights *String[]* an array of prefixes to be applied to each matching line (e.g. [exports.styles.RED,\nexports.styles.BOLD])\n\n####Returns####\n\n*String* a new error stack with the given highlights applied to the message part\n* * *\n\n\nstackRange\n----------\n\n###exports.stackRange = function (stack, start, depthFromStart)###\n\nGiven an stack from an Error return a subset of the lines in the stack. The first line (aka the message) is always\nincluded.\n\n####Parameters####\n\n* stack *String* the Error stack (i.e. error.stack)\n* start *Number* the first line of the stack to include in the range. Note that the message lines are always included\nas the real first lines regardless of the value of 'start'.\n* depthFromStart *Number* optional number of lines from 'start' to include in the returned stack. If not provided the full\nstack depth starting from 'start' is provided.\n\n####Returns####\n\n*String* a new error stack containing the specified range of lines from the provided stack.\n* * *\n\n\nstackFilter\n-----------\n\n###exports.stackFilter = function (stack, filters, inclusive)###\n\nFilter lines of a stack in or out of the stack based on an array of regexp values. If a line matches a regexp then\nit is either included or excluded in the returned stack based on the value of 'inclusive'.\n\n####Parameters####\n\n* stack *String* a stack from an Error (i.e. error.stack)\n* filters *String[]* an array of regular expressions against which to perform match operations on each line of the\nstack\n* inclusive *Boolean* use the filters to include or exclude from the stack. Defaults to true.\n\n####Returns####\n\n*String* a new error stack filtered according to the 'filters' and 'inclusive' values\n* * *\n\n\nstackHighlight\n--------------\n\n###exports.stackHighlight = function (stack, patterns, highlights, inclusive)###\n\nApply highlights to an error stack including the message part (line 0 of error.stack) based on matching patterns.\n\n####Parameters####\n\n* stack *String* a stack from an Error (i.e. error.stack)\n* patterns *String[]* an array of regular expressions against which to perform match operations on each line of the stack\n* highlights an array of prefixes to be applied to each matching line (e.g. [exports.styles.RED,\nexports.styles.BOLD])\n* inclusive *Boolean* use the patterns to include or exclude from the stack. Defaults to true.\n\n####Returns####\n\n*String* a new error stack highlighted with the specified highlights according to the provided patterns\n* * *\n\n\napplyFilters\n------------\n\n###exports.applyFilters = function (includedAction, excludedAction, stack, filters, inclusive, includeMessage)###\n\nApply filters to the lines of an error.stack and call the includedAction or the excludedAction functions based on\nthe result of the match and the value of the 'inclusive' parameter. If based on the filter a stack line is included\nincludedAction is invoked with the current value of the stack under construction and the current stack line. Otherwise\nexcludedAction is called with the same arguments.\n\nThis function is common to higher level functions that operate based on stack line filtering and should only be\nrequired to meet bespoke behaviour that cannot be achieved through the higher level functions (e.g.\nexports.stackHighlight and exports.stackFilter).\n\nNormally there should be no need to call this function directly.\n\n####Parameters####\n\n* {Function(stack, stackLine)} includedAction the function to call for stack lines that are included based on filters and inclusive parameters.\nFunction signature is: includedAction(stackUnderConstruction, includedStackLine) returning the updated\nstackUnderConstruction.\n* {Function(stack, stackLine)} excludedAction the function to call for stack lines that are excluded based on filters and inclusive parameters.\nFunction signature is: excludedAction(stackUnderConstruction, excludedStackLine) returning the updated\nstackUnderConstruction.\n* stack *String* a stack from an Error (i.e. error.stack)\n* filters *String[]* an array of regular expressions against which to perform match operations on each line of the\nstack\n* inclusive *Boolean* use the filters to include or exclude from the stack. Defaults to true.\n* includeMessage *Boolean* include the message part of the stack in the filtering operation\n\n####Returns####\n\n*String* a new error stack modified according to the results of calls to includedAction and excludedAction based on\nfilters provided and the inclusive parameter.\n* * *\n\n\nTesting\n-------\n\nTests utilise [nodeunit](https://github.com/caolan/nodeunit). In addition jshint is run against both lib and test\njavascript files.\n\nFirst install the dependencies:\n\n    $ npm link\n\nThen to run the tests:\n\n    $ npm test\n\n\nContributing\n------------\n\nContributions are welcome. Please create tests for any updates and ensure jshint is run on any new files. Currently\nnpm test will run jshint on all lib and test javascript as well as running all the tests.\n\n\nBugs & Feature Suggestions\n--------------------------\n\nhttps://github.com/allanmboyd/formaterrors/issues\n\n\nKnown Limitations\n-----------------\n\n  * Changing the stack line prefix and subsequently applying stack highlights or theme is not likely to produce the\n    desired result because the stack prefix is key to differentiating between the message and the stack lines parts of\n    the error stack.\n\n\n\n",
  "readmeFilename": "README.md",
  "_id": "formaterrors@0.1.1",
  "dist": {
    "shasum": "079f48f4a9319ef5f5b171f498180d69efcb3c14"
  },
  "_from": "formaterrors@0.1.1",
  "_resolved": "https://registry.npmjs.org/formaterrors/-/formaterrors-0.1.1.tgz"
}
